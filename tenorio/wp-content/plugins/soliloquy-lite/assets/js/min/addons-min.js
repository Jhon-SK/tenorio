!function($,a,o,e){$(function(){function a(a){$(a).attr("disabled")&&$(a).removeAttr("disabled"),$(a).parent().parent().hasClass("soliloquy-addon-not-installed")&&$(a).text(e.install)}$(".soliloquy-chosen").each(function(){$(this).chosen({disable_search:!0})}),$("#soliloquy-addon-filter").on("change",function(){var a=$(this),o=a.val(),e=$("#soliloquy-addons-area"),n=e.data("soliloquy-filter"),t=$("#soliloquy-addons-area .soliloquy-addon");switch(t.show(),o){case"asc":t.sort(function(a,o){return $(a).data("addon-title").localeCompare($(o).data("addon-title"))}).each(function(a,o){$(o).removeClass("last"),e.append(o).hide().fadeIn(100)}),$("#soliloquy-addons-area .soliloquy-addon:nth-child(3n)").addClass("last");break;case"desc":t.sort(function(a,o){return $(o).data("addon-title").localeCompare($(a).data("addon-title"))}).each(function(a,o){$(o).removeClass("last"),e.append(o).hide().fadeIn(100)}),$("#soliloquy-addons-area .soliloquy-addon:nth-child(3n)").addClass("last");break;case"active":t.hide().filter('[data-addon-status="active"]').show(),t.removeClass("last"),$("#soliloquy-addons-area .soliloquy-addon:visible").each(function(a){(a+1)%3===0&&$(this).addClass("last")});break;case"inactive":t.hide().filter('[data-addon-status="inactive"]').show(),t.removeClass("last"),$("#soliloquy-addons-area .soliloquy-addon:visible").each(function(a){(a+1)%3===0&&$(this).addClass("last")});break;case"installed":var l=0;t.hide().filter('[data-addon-status="not_installed"]').show(),t.removeClass("last"),$("#soliloquy-addons-area .soliloquy-addon:visible").each(function(a){(a+1)%3===0&&$(this).addClass("last")})}}),$("#soliloquy-addons-area").on("click.refreshInstallAddon",".soliloquy-addon-action-button",function(o){o.preventDefault();var e=$(this),n=$("#soliloquy-addons-area").find(".soliloquy-addon-action-button");$.each(n,function(o,n){return e===n?!0:void a(n)})}),$("#soliloquy-addons-area").on("click.activateAddon",".soliloquy-activate-addon",function(a){a.preventDefault();var o=$(this),n=o.attr("rel"),t=o.parent().parent(),l=o.parent().parent().find(".addon-status").children("span");$(".soliloquy-addon-error").remove(),o.text(e.activating),o.next().css({display:"inline-block","margin-top":"0px"});var i={url:ajaxurl,type:"post",async:!0,cache:!1,dataType:"json",data:{action:"soliloquy_activate_addon",nonce:e.activate_nonce,plugin:n},success:function(a){return a&&!0!==a?void t.slideDown("normal",function(){$(this).after('<div class="soliloquy-addon-error"><strong>'+a.error+"</strong></div>"),o.next().hide(),$(".soliloquy-addon-error").delay(3e3).slideUp()}):(o.text(e.deactivate).removeClass("soliloquy-activate-addon").addClass("soliloquy-deactivate-addon"),l.text(e.active),t.removeClass("soliloquy-addon-inactive").addClass("soliloquy-addon-active"),void o.next().hide())},error:function(a,e,n){o.next().hide()}};$.ajax(i)}),$("#soliloquy-addons-area").on("click.deactivateAddon",".soliloquy-deactivate-addon",function(a){a.preventDefault();var o=$(this),n=o.attr("rel"),t=o.parent().parent(),l=o.parent().parent().find(".addon-status").children("span");$(".soliloquy-addon-error").remove(),o.text(e.deactivating),o.next().css({display:"inline-block","margin-top":"0px"});var i={url:ajaxurl,type:"post",async:!0,cache:!1,dataType:"json",data:{action:"soliloquy_deactivate_addon",nonce:e.deactivate_nonce,plugin:n},success:function(a){return a&&!0!==a?void t.slideDown("normal",function(){$(this).after('<div class="soliloquy-addon-error"><strong>'+a.error+"</strong></div>"),o.next().hide(),$(".soliloquy-addon-error").delay(3e3).slideUp()}):(o.text(e.activate).removeClass("soliloquy-deactivate-addon").addClass("soliloquy-activate-addon"),l.text(e.inactive),t.removeClass("soliloquy-addon-active").addClass("soliloquy-addon-inactive"),void o.next().hide())},error:function(a,e,n){o.next().hide()}};$.ajax(i)}),$("#soliloquy-addons-area").on("click.installAddon",".soliloquy-install-addon",function(a){a.preventDefault();var o=$(this),n=o.attr("rel"),t=o.parent().parent(),l=o.parent().parent().find(".addon-status").children("span");$(".soliloquy-addon-error").remove(),o.text(e.installing),o.next().css({display:"inline-block","margin-top":"0px"});var i={url:ajaxurl,type:"post",async:!0,cache:!1,dataType:"json",data:{action:"soliloquy_install_addon",nonce:e.install_nonce,plugin:n},success:function(a){return a.error?void t.slideDown("normal",function(){o.parent().parent().after('<div class="soliloquy-addon-error"><strong>'+a.error+"</strong></div>"),o.text(e.install),o.next().hide(),$(".soliloquy-addon-error").delay(4e3).slideUp()}):a.form?(t.slideDown("normal",function(){$(this).after('<div class="soliloquy-addon-error">'+a.form+"</div>"),o.next().hide()}),o.attr("disabled",!0),void $("#soliloquy-addons-area").on("click.installCredsAddon","#upgrade",function(a){a.preventDefault(),o.next().hide(),$(this).val(e.installing),$(this).next().css({display:"inline-block","margin-top":"0px"});var i=$(this).parent().parent().find("#hostname").val(),s=$(this).parent().parent().find("#username").val(),d=$(this).parent().parent().find("#password").val(),r=$(this),c=$(this).parent().parent().parent().parent(),u={url:ajaxurl,type:"post",async:!0,cache:!1,dataType:"json",data:{action:"soliloquy_install_addon",nonce:e.install_nonce,plugin:n,hostname:i,username:s,password:d},success:function(a){return a.error?void t.slideDown("normal",function(){o.parent().parent().after('<div class="soliloquy-addon-error"><strong>'+a.error+"</strong></div>"),o.text(e.install),o.next().hide(),$(".soliloquy-addon-error").delay(4e3).slideUp()}):a.form?(o.next().hide(),$(".soliloquy-inline-error").remove(),$(r).val(e.proceed),void $(r).after('<span class="soliloquy-inline-error">'+e.connect_error+"</span>")):($(c).remove(),o.show(),o.text(e.activate).removeClass("soliloquy-install-addon").addClass("soliloquy-activate-addon"),o.attr("rel",a.plugin),o.removeAttr("disabled"),l.text(e.inactive),t.removeClass("soliloquy-addon-not-installed").addClass("soliloquy-addon-inactive"),void o.next().hide())},error:function(a,e,n){o.next().hide()}};$.ajax(u)})):(o.text(e.activate).removeClass("soliloquy-install-addon").addClass("soliloquy-activate-addon"),o.attr("rel",a.plugin),l.text(e.inactive),t.removeClass("soliloquy-addon-not-installed").addClass("soliloquy-addon-inactive"),void o.next().hide())},error:function(a,e,n){o.next().hide()}};$.ajax(i)})})}(jQuery,window,document,soliloquy_addons);